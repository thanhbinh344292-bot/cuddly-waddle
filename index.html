<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>THANHBINH49 AI PRO</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: -apple-system, sans-serif; height: 100vh; display: flex; flex-direction: column; }
        header { padding: 15px; text-align: center; color: #007aff; font-weight: 900; border-bottom: 1px solid #333; letter-spacing: 1px; }
        #view { flex: 1; display: flex; align-items: center; justify-content: center; background: #111; overflow: hidden; position: relative; }
        canvas { max-width: 98%; max-height: 98%; border-radius: 5px; box-shadow: 0 0 20px #000; }
        .toolbar { padding: 12px; display: flex; gap: 10px; overflow-x: auto; background: #050505; border-bottom: 1px solid #333; }
        button { background: #222; color: #fff; border: 1px solid #444; padding: 12px 18px; border-radius: 10px; white-space: nowrap; font-size: 14px; font-weight: 600; }
        button:active { background: #007aff; border-color: #007aff; }
        #chat { height: 180px; background: #111; display: flex; flex-direction: column; }
        #log { flex: 1; overflow-y: auto; padding: 15px; font-size: 14px; line-height: 1.5; color: #ccc; }
        .input-box { display: flex; padding: 10px; gap: 8px; border-top: 1px solid #333; background: #000; }
        input { flex: 1; background: #222; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 10px; outline: none; }
    </style>
</head>
<body>
    <header>THANHBINH49 AI PRO</header>
    <div id="view"><canvas id="c"></canvas></div>
    <div class="toolbar">
        <button onclick="document.getElementById('file').click()">üìÇ M·ªü ·∫¢nh</button>
        <button onclick="f('contrast(1.6) saturate(1.5)')">üî• Boost</button>
        <button onclick="f('sepia(0.7) brightness(1.2)')">üçÇ Warm</button>
        <button onclick="f('hue-rotate(180deg)')">ü¶Ñ Magic</button>
        <button onclick="res()">üîÑ Reset</button>
        <button onclick="save()" style="background:#007aff; border:none">üíæ L∆∞u</button>
    </div>
    <input type="file" id="file" hidden accept="image/*" onchange="ld(event)">
    <div id="chat">
        <div id="log"><b>AI:</b> Ch√†o s·∫øp B√¨nh! S·∫øp m·ªü ·∫£nh ho·∫∑c g√µ "V·∫Ω m·ªôt c√¥ g√°i" xem sao.</div>
        <div class="input-box">
            <input type="text" id="msg" placeholder="L·ªánh v·∫Ω ho·∫∑c chat...">
            <button onclick="go()" style="border-radius:50%; width:45px; height:45px; padding:0">üöÄ</button>
        </div>
    </div>
<script>
    const cv = document.getElementById('c'), x = cv.getContext('2d');
    let ori = null;

    function ld(e) {
        const r = new FileReader();
        r.onload = (ev) => {
            const img = new Image();
            img.onload = () => {
                cv.width = img.width; cv.height = img.height;
                x.filter = 'none'; x.drawImage(img, 0, 0); ori = img;
                msg("AI", "ƒê√£ nh·∫≠n ·∫£nh, m·ªùi s·∫øp thi tri·ªÉn!");
            };
            img.src = ev.target.result;
        };
        r.readAsDataURL(e.target.files[0]);
    }

    function f(v) {
        if(!ori) return msg("AI", "Ch∆∞a c√≥ ·∫£nh s·∫øp ∆°i!");
        x.clearRect(0, 0, cv.width, cv.height);
        x.filter = v; x.drawImage(ori, 0, 0);
        msg("AI", "Xong! Nh√¨n ·∫£o ma ch∆∞a?");
    }

    function res() { if(ori) { x.filter='none'; x.drawImage(ori, 0, 0); msg("AI", "V·ªÅ zin!"); } }

    function save() {
        const a = document.createElement('a');
        a.download = 'TB49.png'; a.href = cv.toDataURL(); a.click();
    }

    async function go() {
        const i = document.getElementById('msg'), v = i.value.trim();
        if(!v) return; msg("S·∫øp", v); i.value = '';
        if(v.toLowerCase().includes("v·∫Ω")) {
            msg("AI", "ƒêang m√∫a c·ªç, s·∫øp ch·ªù t√≠...");
            const ai = new Image(); ai.crossOrigin = "anonymous";
            ai.src = "https://pollinations.ai/p/" + encodeURIComponent(v) + "?seed=" + Math.random();
            ai.onload = () => {
                cv.width = 1024; cv.height = 1024;
                x.filter = 'none'; x.drawImage(ai, 0, 0); ori = ai;
                msg("AI", "Xong r·ªìi n√® s·∫øp!");
                speak("Xong r·ªìi s·∫øp ∆°i");
            };
        } else {
            msg("AI", "D·∫°, em nghe n√® s·∫øp B√¨nh ƒë·∫πp trai!");
        }
    }

    function msg(s, m) {
        const l = document.getElementById('log');
        l.innerHTML += `<div><b>${s}:</b> ${m}</div>`;
        l.scrollTop = l.scrollHeight;
    }

    function speak(t) {
        const u = new SpeechSynthesisUtterance(t);
        u.lang = 'vi-VN'; window.speechSynthesis.speak(u);
    }
</script>
</body>
</html>
