<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TB49 AI - PIN Äáº¦Y</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: -apple-system, sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        /* Khu vá»±c Ä‘iá»u khiá»ƒn luÃ´n náº±m trÃªn cÃ¹ng */
        .header-box { background: #111; border-bottom: 2px solid #222; padding: 10px 0; z-index: 999; }
        header { text-align: center; color: #007aff; font-weight: 800; font-size: 1.2rem; margin-bottom: 8px; }
        .btns { display: flex; gap: 8px; overflow-x: auto; padding: 0 10px; -webkit-overflow-scrolling: touch; }
        button { background: #222; color: #fff; border: 1px solid #444; padding: 12px 18px; border-radius: 10px; font-weight: 600; white-space: nowrap; }
        button:active { background: #007aff; transform: scale(0.95); }

        /* Khu vá»±c áº£nh tá»± co giÃ£n */
        #v { flex: 1; display: flex; align-items: center; justify-content: center; background: #050505; overflow: hidden; position: relative; padding: 5px; }
        canvas { max-width: 100%; max-height: 100%; border-radius: 10px; border: 1px solid #333; }

        /* Khu vá»±c Chat */
        #chat { height: 150px; background: #000; border-top: 2px solid #222; display: flex; flex-direction: column; }
        #log { flex: 1; overflow-y: auto; padding: 10px; font-size: 13px; color: #aaa; }
        .in-box { display: flex; padding: 10px; gap: 8px; background: #111; }
        input { flex: 1; background: #222; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 10px; outline: none; font-size: 16px; }
    </style>
</head>
<body>

    <div class="header-box">
        <header>THANHBINH49 AI PRO</header>
        <div class="btns">
            <button onclick="document.getElementById('f').click()">ğŸ“‚ Má»</button>
            <button onclick="ef(1.5)" style="color:#ffcc00">ğŸ”¥ BOOST</button>
            <button onclick="ef('bw')">ğŸŒ“ ÄEN TRáº®NG</button>
            <button onclick="rs()">ğŸ”„ RESET</button>
            <button onclick="sv()" style="background:#007aff; border:none">ğŸ’¾ LÆ¯U</button>
        </div>
    </div>

    <div id="v"><canvas id="c"></canvas></div>
    <input type="file" id="f" hidden onchange="ld(event)">

    <div id="chat">
        <div id="log">AI: ÄÃ£ náº¡p Ä‘áº§y pin! GÃµ "váº½ gÃ¬ Ä‘Ã³" Ä‘i sáº¿p BÃ¬nh!</div>
        <div class="in-box">
            <input type="text" id="m" placeholder="Lá»‡nh váº½ (VÃ­ dá»¥: váº½ rá»“ng)...">
            <button onclick="go()" style="background:#007aff; border:none; width:50px; border-radius:10px">ğŸš€</button>
        </div>
    </div>

<script>
    const cv = document.getElementById('c'), x = cv.getContext('2d');
    let ori = null;

    function ld(e) {
        const r = new FileReader();
        r.onload = (ev) => {
            const img = new Image();
            img.onload = () => {
                const ratio = Math.min(1000 / img.width, 1000 / img.height, 1);
                cv.width = img.width * ratio; cv.height = img.height * ratio;
                x.drawImage(img, 0, 0, cv.width, cv.height);
                ori = img; msg("AI", "ÄÃ£ náº¡p áº£nh, sáº¿p thi triá»ƒn Ä‘i!");
            };
            img.src = ev.target.result;
        };
        r.readAsDataURL(e.target.files[0]);
    }

    function ef(t) {
        if(!ori) return msg("AI", "Sáº¿p chÆ°a má»Ÿ áº£nh!");
        x.drawImage(ori, 0, 0, cv.width, cv.height);
        const d = x.getImageData(0, 0, cv.width, cv.height), data = d.data;
        for (let i = 0; i < data.length; i += 4) {
            if(t === 'bw') {
                let a = (data[i] + data[i+1] + data[i+2]) / 3;
                data[i] = data[i+1] = data[i+2] = a;
            } else {
                data[i] *= t; data[i+1] *= t; data[i+2] *= t;
            }
        }
        x.putImageData(d, 0, 0); msg("AI", "Xong hiá»‡u á»©ng!");
    }

    function rs() { if(ori) x.drawImage(ori, 0, 0, cv.width, cv.height); }
    function sv() { const a = document.createElement('a'); a.download='TB49.png'; a.href=cv.toDataURL(); a.click(); }

    async function go() {
        const i = document.getElementById('m'), v = i.value.trim();
        if(!v) return; msg("Báº¡n", v); i.value = '';
        if(v.toLowerCase().includes("váº½")) {
            msg("AI", "Äang náº¡p nÄƒng lÆ°á»£ng váº½...");
            const aimg = new Image(); aimg.crossOrigin = "anonymous";
            // Ã‰p AI dÃ¹ng link má»›i nháº¥t
            aimg.src = `https://pollinations.ai/p/${encodeURIComponent(v)}?width=800&height=800&seed=${Math.random()}&model=flux`;
            aimg.onload = () => {
                cv.width = 800; cv.height = 800;
                x.drawImage(aimg, 0, 0, 800, 800); ori = aimg;
                msg("AI", "Pin Ä‘áº§y, áº£nh Ä‘Ã£ ra lÃ²!");
                if('speechSynthesis' in window) {
                    const s = new SpeechSynthesisUtterance("Xong rá»“i sáº¿p");
                    s.lang = 'vi-VN'; window.speechSynthesis.speak(s);
                }
            };
            aimg.onerror = () => msg("AI", "Háº¿t pin tháº­t rá»“i sáº¿p, thá»­ láº¡i xem!");
        } else { msg("AI", "Em Ä‘Ã¢y sáº¿p!"); }
    }

    function msg(s, m) {
        const l = document.getElementById('log');
        l.innerHTML += `<div><b>${s}:</b> ${m}</div>`;
        l.scrollTop = l.scrollHeight;
    }
</script>
</body>
</html>
