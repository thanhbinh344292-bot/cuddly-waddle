<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TB49 AI PRO</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        header { padding: 10px; text-align: center; color: #007aff; font-weight: bold; border-bottom: 1px solid #333; }
        #canvas-wrap { flex: 1; display: flex; align-items: center; justify-content: center; padding: 10px; background: #111; }
        canvas { max-width: 100%; max-height: 100%; border-radius: 8px; }
        .controls { padding: 10px; display: flex; gap: 5px; overflow-x: auto; background: #000; }
        button { background: #1c1c1e; color: #fff; border: 1px solid #333; padding: 12px; border-radius: 8px; white-space: nowrap; font-size: 13px; }
        button:active { background: #007aff; }
        #chat-box { height: 150px; background: #1c1c1e; display: flex; flex-direction: column; border-top: 1px solid #333; }
        #messages { flex: 1; overflow-y: auto; padding: 10px; font-size: 13px; }
        .input-area { display: flex; padding: 10px; gap: 5px; }
        input { flex: 1; background: #2c2c2e; border: none; padding: 10px; color: #fff; border-radius: 5px; }
    </style>
</head>
<body>
    <header>THANHBINH49 AI PRO</header>
    <div id="canvas-wrap"><canvas id="c"></canvas></div>
    <div class="controls">
        <button onclick="document.getElementById('f').click()">üìÇ M·ªü ·∫¢nh</button>
        <button onclick="ef('contrast(1.5) saturate(1.5)')">üî• Boost</button>
        <button onclick="ef('hue-rotate(90deg)')">ü¶Ñ Fantasy</button>
        <button onclick="ef('sepia(0.8)')">üçÇ Warm</button>
        <button onclick="rs()">üîÑ Reset</button>
        <button onclick="sv()" style="background:#007aff">üíæ L∆∞u</button>
    </div>
    <input type="file" id="f" hidden accept="image/*" onchange="ld(event)">
    <div id="chat-box">
        <div id="messages"><i>S·∫µn s√†ng ph·ª•c v·ª• s·∫øp B√¨nh...</i></div>
        <div class="input-area">
            <input type="text" id="msg" placeholder="V·∫Ω con r·ªìng...">
            <button onclick="ai()">üöÄ</button>
        </div>
    </div>

<script>
    const cv = document.getElementById('c'), x = cv.getContext('2d');
    let ori = null;
    // Load ·∫£nh
    function ld(e) {
        const r = new FileReader();
        r.onload = (i) => {
            const img = new Image();
            img.onload = () => {
                cv.width = img.width; cv.height = img.height;
                x.drawImage(img, 0, 0); ori = img;
            };
            img.src = i.target.result;
        };
        r.readAsDataURL(e.target.files[0]);
    }
    // Hi·ªáu ·ª©ng
    function ef(f) {
        if(!ori) return;
        x.filter = f; x.drawImage(ori, 0, 0);
    }
    function rs() { if(ori) { x.filter='none'; x.drawImage(ori, 0, 0); } }
    function sv() { const a = document.createElement('a'); a.download='ai.png'; a.href=cv.toDataURL(); a.click(); }
    // AI V·∫Ω
    async function ai() {
        const i = document.getElementById('msg'), v = i.value; if(!v) return;
        log("B·∫°n", v); i.value = '';
        if(v.includes("v·∫Ω")) {
            log("AI", "ƒêang v·∫Ω...");
            const img = new Image(); img.crossOrigin = "anonymous";
            img.src = "https://pollinations.ai/p/" + encodeURIComponent(v) + "?width=1024&height=1024&seed=" + Math.random();
            img.onload = () => { cv.width = 1024; cv.height = 1024; x.drawImage(img, 0, 0); ori = img; log("AI", "Xong!"); spk("Xong r·ªìi s·∫øp"); };
        } else { log("AI", "D·∫° s·∫øp!"); spk("D·∫° s·∫øp"); }
    }
    function log(s, m) { const d = document.getElementById('messages'); d.innerHTML += `<div><b>${s}:</b> ${m}</div>`; d.scrollTop = d.scrollHeight; }
    function spk(t) { window.speechSynthesis.speak(new SpeechSynthesisUtterance(t)); }
</script>
</body>
</html>
